<p mat-dialog-title>User settings</p>
<div mat-dialog-content>
  <app-form [flex]='true' [controls]='name' [values]="user" (form)="getForm($event)"></app-form>
  <app-form [flex]='true' [controls]='login' [values]="user" (form)="getForm($event)"></app-form>
  <app-form [flex]='true' [controls]='mail' [values]="user" (form)="getForm($event)"></app-form>
  <app-form [flex]='true' [controls]='role' [values]="user" (form)="getForm($event)"></app-form>
  <mat-form-field appearance="outline" class="w-full">
    <mat-label>Departments </mat-label>
    <div style="height: 0; overflow: hidden;">
      <mat-select #select [formControl]="departments" multiple>
        <div *ngFor="let plant of departmentsList">
          <p class="font-bold mx-4 mt-4 cursor-default">{{plant.plant.name}}</p>
          <mat-option *ngFor="let department of plant.departments" [value]="department.departmentId"
            [disabled]='department.disabled'>
            {{department.name}}
          </mat-option>
          <!-- <mat-divider></mat-divider> -->
        </div>
      </mat-select>
    </div>
    <div style="min-height: 1.4rem;">
      <mat-chip-list>
        <mat-chip *ngFor="let dep of user.departments" (click)="select.open()">{{dep.name}}</mat-chip>
      </mat-chip-list>
    </div>
  </mat-form-field>
  <app-form [flex]='true' [controls]='active' [values]="user" (form)="getForm($event)"></app-form>
</div>
<mat-dialog-actions class="flex justify-end">
  <button mat-button color="primary" mat-dialog-close>CANCEL</button>
  <button mat-raised-button color="primary" [disabled]='saveDisabled()' [mat-dialog-close]="user">SAVE</button>
</mat-dialog-actions>